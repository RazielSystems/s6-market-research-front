<div class="container servidor-publico" *ngIf="servidores">
  <div class="row">
    <div *ngIf="isServidoresArray()" class="col-md-3">
      <!-- Lista de servidores (solo se muestra si es un array) -->
      <div class="mb-3">
        <div class="list-group">
          <button *ngFor="let servidor of getServidoresArray(); let i = index" 
                  class="list-group-item list-group-item-action"
                  [class.active]="i === selectedServidorIndex"
                  (click)="selectServidor(servidor)">
            {{ servidor?.declarante?.nombre }} 
            {{ servidor?.declarante?.primerApellido }} 
            {{ servidor?.declarante?.segundoApellido }}
          </button>
        </div>
      </div>
    </div>
    <div class="col">
      <h5><i class="bi bi-person-fill"></i> {{ getCurrentServidor()?.declarante?.nombre }} {{ getCurrentServidor()?.declarante?.primerApellido }} {{ getCurrentServidor()?.declarante?.segundoApellido }}</h5>
      <!-- Navegación de tabs -->
      <ul class="nav nav-tabs mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
          <button class="nav-link" 
                  [class.active]="activeTab === 'empleo'"
                  (click)="setActiveTab('empleo')">
            <i class="bi bi-briefcase me-2"></i>Empleo
          </button>
        </li>
        <li class="nav-item">
          <button class="nav-link" 
                  [class.active]="activeTab === 'participacion'"
                  (click)="setActiveTab('participacion')">
            <i class="bi bi-building me-2"></i>Participación en Empresas
          </button>
        </li>
      </ul>
  
      <!-- Contenido de tabs -->
      <div class="tab-content">
        <!-- Tab Empleo -->
        <div class="tab-pane fade" [class.show]="activeTab === 'empleo'" [class.active]="activeTab === 'empleo'">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title mb-4">Información del Empleo Actual</h5>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Nombre del Servidor Público</p>
                    <p class="fw-bold">
                      {{ getCurrentServidor()?.declarante?.nombre }}
                      {{ getCurrentServidor()?.declarante?.primerApellido }}
                      {{ getCurrentServidor()?.declarante?.segundoApellido }}
                    </p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Ente Público</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.empleo?.nombreEntePublico || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Área de Adscripción</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.empleo?.areaAdscripcion || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Cargo</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.empleo?.empleoCargoComision || 'No disponible' }}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Función Principal</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.empleo?.funcionPrincipal || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Fecha de Toma de Posesión</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.empleo?.fechaTomaPosesion | date:'dd/MM/yyyy' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Teléfono de Oficina</p>
                    <p class="fw-bold">
                      {{ getCurrentServidor()?.empleo?.telefonoOficina?.telefono || 'No disponible' }}
                      <span class="text-muted" *ngIf="getCurrentServidor()?.empleo?.telefonoOficina?.extension">
                        ext. {{ getCurrentServidor()?.empleo?.telefonoOficina?.extension }}
                      </span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Tab Participación -->
        <div class="tab-pane fade" [class.show]="activeTab === 'participacion'" [class.active]="activeTab === 'participacion'">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title mb-4">Participación en Empresas</h5>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Nombre de la Empresa</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.nombreEmpresaSociedadAsociacion || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">RFC</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.rfc || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Tipo de Participación</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.tipoParticipacion?.valor || 'No disponible' }}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Porcentaje de Participación</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.porcentajeParticipacion || 0 }}%</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Sector</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.sector?.valor || 'No disponible' }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Ubicación</p>
                    <p class="fw-bold">{{ getCurrentServidor()?.participacion?.ubicacion?.entidadFederativa?.valor || 'No disponible' }}</p>
                  </div>
                </div>
              </div>
              <div class="alert alert-info mt-3">
                <i class="bi bi-info-circle me-2"></i>
                <span>Remuneración:</span>
                {{ getCurrentServidor()?.participacion?.recibeRemuneracion ? "Sí" : "No" }} recibe remuneración
                <span *ngIf="getCurrentServidor()?.participacion?.recibeRemuneracion">
                  - Monto mensual: {{ getCurrentServidor()?.participacion?.montoMensual?.valor | currency:'MXN':'symbol-narrow':'1.2-2' }}
                </span>
              </div>
            </div>
          </div>
        </div>
  
  
      </div>
    </div>  
  </div>
</div>
