<div class="container sancion-empresa mt-3" *ngIf="sanciones">
  <div class="row">
    <div *ngIf="isSancionesArray()" class="col-md-3">
      <!-- Lista de sanciones (solo se muestra si es un array) -->
      <div class="mb-3">
        <div class="list-group">
          <button *ngFor="let sancion of getSancionesArray(); let i = index" 
                  class="list-group-item list-group-item-action"
                  [class.active]="i === selectedSancionIndex"
                  (click)="selectSancion(sancion)">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-shield-fill-exclamation"></i>
              <div>
                <small class="d-block">{{ sancion.institucionDependencia.siglas }}</small>
                <span class="institution-name">{{ sancion.institucionDependencia.nombre }}</span>
              </div>
            </div>
          </button>
        </div>
      </div>
    </div>
    <div class="col">
      <h5><i class="bi bi-shield-fill-exclamation"></i> {{ getCurrentSancion()?.institucionDependencia?.nombre }}</h5>
      
      <!-- Navegación de tabs -->
      <ul class="nav nav-tabs mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
          <button class="nav-link" 
                  [class.active]="activeTab === 'causal'"
                  (click)="setActiveTab('causal')">
            <i class="bi bi-exclamation-circle me-2"></i>Causa y Detalles
          </button>
        </li>
        <li class="nav-item">
          <button class="nav-link" 
                  [class.active]="activeTab === 'particular'"
                  (click)="setActiveTab('particular')">
            <i class="bi bi-person me-2"></i>Particular Sancionado
          </button>
        </li>
      </ul>

      <!-- Contenido de tabs -->
      <div class="tab-content">
        <!-- Tab Causa y Detalles -->
        <div class="tab-pane fade" [class.show]="activeTab === 'causal'" [class.active]="activeTab === 'causal'">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title mb-4">Información de la Sanción</h5>
              <div class="row g-3">
                <div class="col-md-12">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Causa, motivo, hechos</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.causaMotivoHechos }}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Acto</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.acto }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Tipo de Sanción</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.tipoSancion?.valor }}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Responsable de la Sanción</p>
                    <p class="fw-bold">
                      {{ getCurrentSancion()?.responsableSancion?.nombre }}
                      {{ getCurrentSancion()?.responsableSancion?.primerApellido }}
                      {{ getCurrentSancion()?.responsableSancion?.segundoApellido }}
                    </p>
                  </div>
                </div>
              </div>

              <!-- Información de Resolución -->
              <div class="alert alert-info mt-3">
                <i class="bi bi-info-circle me-2"></i>
                <span>Resolución:</span>
                <p class="mb-0">
                  <span class="fw-bold">Sentido:</span> {{ getCurrentSancion()?.resolucion?.sentido }}
                  <br>
                  <span class="fw-bold">Fecha de notificación:</span> {{ getCurrentSancion()?.resolucion?.fechaNotificacion | date:'dd/MM/yyyy' }}
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab Particular Sancionado -->
        <div class="tab-pane fade" [class.show]="activeTab === 'particular'" [class.active]="activeTab === 'particular'">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title mb-4">Información del Particular Sancionado</h5>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Nombre/Razón social</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.particularSancionado?.nombreRazonSocial }}</p>
                  </div>
                  <div class="mb-3">
                    <p class="text-muted mb-1">Tipo de Persona</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.particularSancionado?.tipoPersona }}</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <p class="text-muted mb-1">Objeto Social</p>
                    <p class="fw-bold">{{ getCurrentSancion()?.particularSancionado?.objetoSocial }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>